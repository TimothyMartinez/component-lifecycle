{"ast":null,"code":"var _jsxFileName = \"/home/timartin/My Projects/react-components/src/components/Room.js\";\nimport React from 'react';\nimport Person from './Person';\n\nclass Room extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.newVisit = () => {\n      this.setState({\n        totalVisits: this.state.totalVisits + 1,\n        loading: true\n      });\n    };\n\n    this.removePerson = id => {\n      // console.log(\"remove person with id\", id)\n      this.setState({\n        people: this.state.people.filter(person => person.id !== id)\n      });\n    };\n\n    this.fetchPerson = () => {\n      fetch('https://randomuser.me/api/?inc=name,login,picture&nat=us').then(res => res.json()).then(data => {\n        // console.log(data)\n        const newPerson = data.results.map(person => {\n          return {\n            id: person.login.uuid,\n            name: \"\".concat(person.name.first, \" \").concat(person.name.last),\n            picture: person.picture.large\n          };\n        });\n        this.setState({\n          people: [...this.state.people, ...newPerson],\n          totalVisits: this.state.people.length + newPerson.length,\n          loading: false\n        });\n      });\n    };\n\n    this.state = {\n      loading: true,\n      people: [],\n      totalVisits: 1\n    };\n  }\n\n  componentDidMount() {\n    this.fetchPerson();\n  }\n\n  componentDidUpdate(_, prevState) {\n    if (this.state.totalVisits > prevState.totalVisits && this.state.loading) {\n      this.fetchPerson();\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          people = _this$state.people,\n          loading = _this$state.loading;\n    return React.createElement(\"div\", {\n      className: \"room-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.newVisit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"New Visitor\"), people.map(person => React.createElement(Person, Object.assign({}, person, {\n      key: person.id,\n      remove: this.removePerson,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }))), loading && React.createElement(Person, {\n      pending: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Room;","map":{"version":3,"sources":["/home/timartin/My Projects/react-components/src/components/Room.js"],"names":["React","Person","Room","Component","constructor","props","newVisit","setState","totalVisits","state","loading","removePerson","id","people","filter","person","fetchPerson","fetch","then","res","json","data","newPerson","results","map","login","uuid","name","first","last","picture","large","length","componentDidMount","componentDidUpdate","_","prevState","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Person from './Person';\n\nclass Room extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      loading: true,\n      people: [],\n      totalVisits: 1\n    }\n  }\n\n  newVisit = () => {\n    this.setState({totalVisits: this.state.totalVisits + 1, loading: true})\n  }\n\n  removePerson = id => {\n    // console.log(\"remove person with id\", id)\n    this.setState({\n      people: this.state.people.filter(person => person.id !== id)\n    })\n  }\n\n  fetchPerson = () => {\n    fetch('https://randomuser.me/api/?inc=name,login,picture&nat=us')\n      .then(res => res.json())\n      .then(data => {\n        // console.log(data)\n        const newPerson = data.results.map(person => {\n          return (\n            {\n              id: person.login.uuid,\n              name: `${person.name.first} ${person.name.last}`,\n              picture: person.picture.large\n            }\n          )\n        })\n        this.setState({\n          people: [...this.state.people, ...newPerson],\n          totalVisits: this.state.people.length + newPerson.length,\n          loading: false\n        })\n      })\n  }\n\n  componentDidMount() {\n    this.fetchPerson()\n  }\n\n  componentDidUpdate(_, prevState) {\n    if(this.state.totalVisits > prevState.totalVisits && this.state.loading){\n      this.fetchPerson()\n    }\n  }\n\n  render(){\n    const {people, loading} = this.state\n    return(\n      <div className=\"room-container\">\n        <button onClick={this.newVisit}>New Visitor</button>\n        {\n          people.map(person => (\n            <Person {...person} key={person.id} remove={this.removePerson}/>\n          ))\n        }\n        {loading && <Person pending />}\n      </div>\n    )\n  }\n}\n\nexport default Room\n"]},"metadata":{},"sourceType":"module"}